<div class="">
  <div class="div-container-user pt-2"  >

    <div class="d-flex mt-2 mb-2 fw-bold text-primary">
      THỐNG KÊ VI PHẠM VỀ TỐC ĐỘ THEO ĐƠN VỊ VẬN TẢI

    </div>


<div class="row no-gutters mr-0">
  <div class="col-sm-12 col-12 col-lg col-md-12 row no-gutters">

  
    <div class="col-xl-2 col-lg-3 col-md-3 col-sm-3 col-12 row no-gutters mt-1 pr-2">
       
      <label class=" col-form-label w-100  mx-2">Từ ngày</label>
      <ngb-timepicker [(ngModel)]="timeFrom" [spinners]="false" class="mr-2 mt-1"></ngb-timepicker>

      <input type="text"   class="form-control col datepicker  mt-1  " bsDatepicker [(ngModel)]="dayFrom"
        placeholder="Chọn ngày">
       
    </div>
    <div class="col-xl-2 col-lg-3 col-md-3 col-sm-3 col-12 row no-gutters mt-1 pr-2">
      <label class="  col-form-label w-100  mx-2">Đến ngày</label>
      <ngb-timepicker [(ngModel)]="timeTo" [spinners]="false" class="mr-2 mt-1"></ngb-timepicker>
      <input type="text"   class="form-control col datepicker  mt-1 " bsDatepicker [(ngModel)]="dayTo"
        placeholder="Chọn ngày">
    </div>

    <div class="col-xl-8 col-lg-6 col-md-6 col-sm-6 col-12 row no-gutters mt-1">
      <label class="  col-form-label w-100  mx-2">Phương tiện</label>

      <!-- <input [(ngModel)]="selectedState"
   [typeahead]="states" 
   [typeaheadMinLength]="0"
   class="form-control col mr-2 mt-1 pl-2"> -->

   <ng-multiselect-dropdown
   [placeholder]="'Chọn phương tiện'"
   [settings]="dropdownSettings"
   [data]="dropdownList"
   [(ngModel)]="selectedItems"
   (onSelect)="onItemSelect($event)"
   (onSelectAll)="onSelectAll($event)"
   class="mr-2 col"
 >
 </ng-multiselect-dropdown>

  <button   class="btn btn-primary rounded btn-search mt-1 w-auto" (click)="getDataReport()"
  style=" margin-right: 0px">
  <i class="fa-solid fa-magnifying-glass p-right-5"></i>
  Xem báo cáo</button>
    </div>

  </div>

<div class="w-auto row no-gutters">
  <!-- <label class="   mx-2  col-form-label w-auto mt-1">Giới tính</label>
  <select class="w-auto mr-2 mt-1 form-control" role="button" [(ngModel)]="gioiTinhSearch" name="gioiTinhSearch">
    <option *ngFor="let option of gioiTinhList" [value]="option.value">
      {{ option.viewValue }}</option>
  </select> -->
  <!-- <input [(ngModel)]="selectedState"
   [typeahead]="states"
   class="form-control">
  <button   class="btn btn-primary rounded btn-search mt-1 w-auto" (click)="getDataReport()"
  style=" margin-right: 0px">
  <i class="fa-solid fa-magnifying-glass p-right-5"></i>
  Xem báo cáo</button> -->
</div>
</div>
 
    <div class="row   no-gutters gy-0 mb-2 mt-1" style="justify-content: space-between;">
      <!-- <div class="row no-gutters w-auto      pl-0 ">
        <button *ngIf="isRoleAdd" class="btn w-auto btn-primary rounded mr-2 mt-1" (click)="add()">
          <i class="fa-solid fa-plus p-right-5"></i>
          Thêm</button>
        <button *ngIf="isRoleDelete && isShowDelete" class="btn w-auto btn-danger rounded mr-2 mt-1" (click)="deleteList()">
          <i class="fa-solid fa-trash-can p-right-5" accesskey="">

          </i>Xóa</button>

      </div>
      <div
        class="   row w-auto  div-search pr-0 button-export no-gutters">
        <button *ngIf="isRoleAdd" class="btn w-auto btn-primary rounded mr-2 mt-1" (click)="exportToExcel()">
          <i class="fa-regular fa-file-excel pr-1"></i>
          Xuất Excel</button>
        <button *ngIf="isRoleAdd" class="btn w-auto btn-primary rounded mt-1" (click)="exportTableToPDF()">
          <i class="fa-regular fa-file-pdf pr-1"></i>
          Xuất Pdf</button>

      </div> -->
    </div>
    <div class="pb-2">
      <div class="border ">
        <div class="table-scroll">
          <!-- table bootstrap -->
          <table class="table table-bordered table-hover custom-mat-table align-middle" id="tableToExport" width="100%" #table>
            <thead class="align-middle">
              <tr >
                <th scope="col" class="w-8 text-light   custom-header  text-center " rowspan="2">STT</th>
                <th scope="col" class="w-8 custom-header  text-light  text-center " rowspan="2" >Phương tiện</th>

                <th scope="col" class="w-10 custom-header  text-light  text-center " rowspan="2">Loại hình</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center  border-bottom-0" colspan="6">Số lần vi phạm tốc độ</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center  border-bottom-0" colspan="3">Quãng đường</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center  border-bottom-0" colspan="3">Thời gian</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center " rowspan="2">Ghi chú</th>
                 
              </tr>
              <tr >
                <th scope="col" class="w-8 text-light   custom-header  text-center ">5 km/h - 10 km/h</th>
                <th scope="col" class="w-8 custom-header  text-light  text-center "  >10 km/h - 20 km/h</th>

                <th scope="col" class="w-10 custom-header  text-light  text-center ">20 km/h - 35 km/h</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Trên 35 km/h</th>
                 
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Tổng cộng</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Số lần vi phạm /1000 km phương tiện chạy</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Km vi phạm</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Tổng phương tiện chạy</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Tỉ lệ %</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Thời gian vi phạm</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Tổng thời gian phương tiện chạy</th>
                <th scope="col" class="w-10 custom-header  text-light  text-center ">Tỉ lệ %</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of dataReport">
                <td class="w-8 text-center ">{{item.stt}}</td>
                <td class=" text-center "><input type="checkbox" role="button"  
                    [(ngModel)]="item.selected"></td>

                <td class=" text-center "
                  [ngClass]="{'text-primary': item.isActive == true,'text-danger': item.isActive == false}">
                  {{item.username}}</td>
                <td class=" text-center " [ngClass]="{'text-end': item.sexId == 1, 
         'text-start': item.sexId == 2, 'text-center': item.sexId == 3}">
                  {{item.fullName}}</td>
                <td class=" text-center ">{{item.birthday | date: formatDate}}</td>
                <td class=" text-center ">{{item.gioiTinhText}}</td>
                <td class=" text-center ">{{item.phone | phoneFormat }}</td>
                <td class=" text-center ">{{item.email}}</td>
                <td class=" text-center min-w-105">
                  <span class="bg-success  text-white p-2 rounded  " *ngIf="item.isActive == true">Hoạt động</span>
                  <span class="bg-danger  text-white p-2 rounded  " *ngIf="item.isActive == false">Vô hiệu hóa</span>
                </td>
                <!-- <td class=" text-center "  >
                  <button class="btn"  (click)="editUser($event,item)" ><i class="fa-regular fa-pen-to-square c-poiter"
                   ></i></button>
                  </td>
                <td class=" text-center "  > 
                  <button class="btn"  (click)="deleteUser($event,item)" >
                  <i class="fa-solid fa-trash-can c-poiter text-danger"
                      accesskey="">

                  </i></button>
                </td> -->

              </tr>

            </tbody>
          </table>
        </div>
        <!--end table bootstrap -->

        <nav aria-label="Page navigation example " class="bg-light d-flex flex-wrap" style="justify-content: space-between;">
          <div class="d-flex flex-wrap">
          <ul class="pagination m-2 flex-wrap">

            <li class="page-item">
              <a class="page-link" role="button" (click)="minPage()">
                <i class="fa-solid fa-backward-step"></i>
              </a>
            </li>
            <li class="page-item">
              <a class="page-link" role="button" (click)="prePage()">
                <i class="fa-solid fa-play  " style="transform: rotate(180deg); "></i>
              </a>
            </li>
            <li class="page-item" [ngClass]="{'active': pageNumber == page.value}" *ngFor="let page of arrayPage">
              <a class="page-link" role="button" (click)="selectPage(page.value)">{{page.text}}</a>
            </li>

            <li class="page-item">
              <a class="page-link" role="button" (click)="nextPage()">
                <i class="fa-solid fa-play  "></i>
              </a>
            </li>
            <li class="page-item  ">
              <a class="page-link" role="button" (click)="maxPage()">
                <i class="fa-solid fa-forward-step"></i>
              </a>
            </li>
            
          </ul>
          <ul class="d-flex pagination m-2 flex-wrap">
            <li class="ml-2 mr-2 ">
              <select class="form-control mx-2 combo-item" role="button" [(ngModel)]="pageSize" (change)="ChangeCbbPageSize()">
                <i style="padding-top: 8px" class="fa-solid fa-caret-down icon-dropbtn"></i>
                <option *ngFor="let option of listPaging" [value]="option.value">
                  {{ option.value }}</option>
              </select>

            </li>
            <li class="d-flex align-items-center">
              <label class="mb-0 ml-2">Dòng mỗi trang</label>
            </li>


          </ul>
        </div>
          <ul class="flex-right m-2 pagination">
            <li class="d-flex align-items-center h-100">
              <label class="mr-2 mb-0">{{rowStart}} - {{rowEnd}} trên tổng {{totalCountListAll}} dòng</label>
              <i class="fa-solid fa-rotate-right" role="button" (click)="getDataReport()"></i>
            </li>

          </ul>
        </nav>

      </div>
    </div>
  </div>
</div>